{% extends 'form_div_layout.html.twig' %}

{% block entity_widget %}
    {% set attr = attr|merge({'class': 'avatar-checkbox'}) %}
    <div {{ block('widget_container_attributes') }}>
        {% for child in form %}

            {% set index = child.vars.value %}
            <div class="form-user-display">
                {{ form_widget(child, {'attr': attr}) }}
                {% if form.vars.choices[index].data.avatar == '' %}
                    <img src="{{ asset('build/images/default-avatar.png') }}" alt="" class="form-avatar-image"/>
                {% else %}
                    <img src="{{ asset('build/images/'~form.vars.choices[index].data.avatar) }}" alt="" class="form-avatar-image"/>
                {% endif %}
                {{ form_label(child, null, {
                    'translation_domain': 'messages',
                    'label_attr': {'class': 'form-label users-names-form'}
                }) }}
            </div>
        {% endfor %}
    </div>
{% endblock %}
